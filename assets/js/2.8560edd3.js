(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{168:function(t,e,n){t.exports=n.p+"assets/img/imba-logo.947e4c2c.png"},169:function(t,e,n){t.exports=n.p+"assets/img/imba.io.speed.d600c623.jpg"},170:function(t,e){t.exports="data:image/jpeg;base64,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"},171:function(t,e,n){t.exports=n.p+"assets/img/chorme-portals.427a443f.jpg"},180:function(t,e,n){"use strict";n.r(e);var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"震惊，使用-imba-框架-得到比-vue-快50倍的性能基准"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#震惊，使用-imba-框架-得到比-vue-快50倍的性能基准","aria-hidden":"true"}},[this._v("#")]),this._v(" 震惊，使用 imba 框架,得到比 vue 快50倍的性能基准")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:n(168),alt:"imba logo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:n(169),alt:"imba 速度图片"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"imba-简单介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#imba-简单介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" imba 简单介绍")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("imba 是一种新的编程语言，可以编译为高性能的 JavaScript。可以直接用于 Web 编程(服务端与客户端)开发。"),e("br"),this._v("\n下面是语法：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// 自定义标签\ntag App\n    // 属性\n\tprop items\n\n    // 方法定义\n\tdef addItem\n\t\tif @input.value\n\t\t\titems.push(title: @input.value)\n\t\t\t@input.value = \"\"\n\n\tdef toggleItem item\n\t\titem:completed = !item:completed\n\n// 挂载 Imba.mount(element, into) \n// 如果没有第二个参数，默认挂载到 document.body 上面\nImba.mount <App.vbox items=[] ->\n\t<form.bar :submit.prevent.addItem>\n\t\t<input@input>\n\t\t<button> 'add'\n\t<ul> for item in items\n\t\t<li .done=item:completed :tap.toggleItem(item)> item:title\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"imba-框架极速的性能基础"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#imba-框架极速的性能基础","aria-hidden":"true"}},[this._v("#")]),this._v(" imba 框架极速的性能基础")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"理论基础"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#理论基础","aria-hidden":"true"}},[this._v("#")]),this._v(" 理论基础")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("浏览器的 DOM 操作可以说是浏览器最终要的功能，无论框架是基于虚拟 DOM 或者是真实 DOM，最终离不开操作 DOM 对象。"),e("br"),this._v("\nHTML DOM 是浏览器定义了访问和操作 HTML 文档的标准方法。但是操作 DOM 的接口是 JavaScript。但是浏览器通常会把 js 引擎和渲染引擎分开实现。也就是页面实际渲染部分是和解析js部分分开的。\n借着《高性能的 JavaScript》话说，如果把 DOM 和 js 各自想象为岛屿。他们需要一座桥进行沟通。所以每一次执行 DOM 操作就过桥一次。"),e("br"),this._v("\n那我们先谈谈虚拟DOM，虚拟DOM 的性能提升在于是将 DOM 的对比放在了js层。进而通过对比不同之处来进行实际的 DOM 渲染。也就是说，其实虚拟DOM 并没有“实际”的性能收益，桥仍旧还在那边。仅仅在 js引擎需要过桥的那边找到了一位聪明睿智的大叔,对过桥的人和过桥的货物进行优化和限制(虚拟DOM 高性能的diff算法，状态批量更新)。"),e("br"),this._v("\n那么 memoized DOM 又是怎么做的呢？把 DOM 节点的控制直接放入内存之中。类似于此类优化.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("function getEls(sel) {\n    // 设置缓存\n    if (!getEls.cache) getEls.cache = {};\n    \n    // 如果缓存中存在 el，直接返回 \n    if (getEls.cache[sel]) {\n        return getEls.cache[sel];\n    }\n\n    // 没有去通过 DOM 查询\n    const r = document.querySelectorAll(sel || '☺'),\n        length = r.length;\n    \n    // 缓存并返回元素节点\n    return getEls.cache[sel] = (length == 1) ? r[0] : r;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// 直接通过 querySelectorAll 获取节点\nfunction getElsByDocument(sel) {\n    const r = document.querySelectorAll(sel || '☺'),\n        length = r.length;\n    return length == 1 ? r[0] : r;\n}\n\n// 简单性能测试\nfunction simplePerTest(fn, el) {\n    const fnName = fn.name\n    console.time(fnName)\n    \n    // 2000 次操作\n    for(let i = 0,len = 2000; i < len; i++) {\n        fn(el)\n    }\n    console.timeEnd(fnName)\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:n(170),alt:"dom 速度测试图片"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"框架实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#框架实践","aria-hidden":"true"}},[this._v("#")]),this._v(" 框架实践")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('tag Component\n\tdef render\n\t\t<self>\n\t\t\t<h1.title> "Welcome"\n\t\t\t<p.desc> "I am a component"\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("var Component = Imba.defineTag('Component', function(tag){\n    tag.prototype.render = function (){\n        var $ = this.$;\n        // 返回dom\n        return this.setChildren($.$ = $.$ || [\n            createElement('h1',$,0,this).flag('title').setText(\"Welcome\"),\n            createElement('p',$,1,this).flag('desc').setText(\"I am a component\")\n        ]).synced();\n    };\n});\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// 在第一次调用时候 $.$不存在  $.$会等于 后面的数组\n// 第二次调用 $.$ 是存在的，无运行时消耗\n$.$ = $.$ || 数组\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("tag.prototype.setChildren = function (new$,typ){\n\n\tvar old = this._tree_;\n\t\n\tif (new$ === old && (!(new$) || new$.taglen == undefined)) {\n\t\treturn this;\n\t};\n\tif (!old && typ != 3) {\n\t\tthis.removeAllChildren();\n\t\tappendNested(this,new$);\n\t} else if (typ == 1) {\n\t\tvar caret = null;\n\t\tfor (var i = 0, items = iter$(new$), len = items.length; i < len; i++) {\n\t\t\tcaret = reconcileNested(this,items[i],old[i],caret);\n\t\t};\n\t} else if (typ == 2) {\n\t\treturn this;\n\t} else if (typ == 3) {\n\t\tvar ntyp = typeof new$;\n\t\t\t\n\t\tif (ntyp != 'object') {\n\t\t\treturn this.setText(new$);\n\t\t};\n\t\t\t\n\t\tif (new$ && new$._dom) {\n\t\t\tthis.removeAllChildren();\n\t\t\tthis.appendChild(new$);\n\t\t} else if (new$ instanceof Array) {\n\t\t\tif (new$._type == 5 && old && old._type == 5) {\n\t\t\t\treconcileLoop(this,new$,old,null);\n\t\t\t} else if (old instanceof Array) {\n\t\t\t\treconcileNested(this,new$,old,null);\n\t\t\t} else {\n\t\t\t\tthis.removeAllChildren();\n\t\t\t\tappendNested(this,new$);\n\t\t\t};\n\t\t} else {\n\t\t\treturn this.setText(new$);\n\t\t};\n\t} else if (typ == 4) {\n\t\treconcileIndexedArray(this,new$,old,null);\n\t} else if (typ == 5) {\n\t\treconcileLoop(this,new$,old,null);\n\t} else if ((new$ instanceof Array) && (old instanceof Array)) {\n\t\treconcileNested(this,new$,old,null);\n\t} else {\n\t\t// what if text?\n\t\tthis.removeAllChildren();\n\t\tappendNested(this,new$);\n\t};\t\n\tthis._tree_ = new$;\n\treturn this;\n};\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('tag Component\n    def render\n        <self>\n            <h1.title> "Welcome"\n            # 有 50% 几率 拥有 red class\n            <p.desc .red=(Math.random > 0.5)> "IMBA"\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("var Component = Imba.defineTag('Component', function(tag){\n    tag.prototype.render = function (){\n        var $ = this.$;\n        return this.setChildren($.$ = $.$ || [\n            _1('h1',$,0,this).flag('title').setText(\"Welcome\"),\n            _1('p',$,1,this).flag('desc').setText(\"Roulette\")\n        ],2).synced((\n            $[1].flagIf('red',Math.random() > 0.5)\n        ,true));\n    };\n});\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"imba-框架“虚假”的性能测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#imba-框架“虚假”的性能测试","aria-hidden":"true"}},[this._v("#")]),this._v(" imba 框架“虚假”的性能测试")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"浏览器的运行机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的运行机制","aria-hidden":"true"}},[this._v("#")]),this._v(" 浏览器的运行机制")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"真实世界的内存限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#真实世界的内存限制","aria-hidden":"true"}},[this._v("#")]),this._v(" 真实世界的内存限制")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"imba-框架与浏览器的畅想"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#imba-框架与浏览器的畅想","aria-hidden":"true"}},[this._v("#")]),this._v(" imba 框架与浏览器的畅想")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"google-io-大会-chorme-portals-技术"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#google-io-大会-chorme-portals-技术","aria-hidden":"true"}},[this._v("#")]),this._v(" Google io 大会 chorme Portals 技术")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:n(171),alt:"Chorme Protals 技术"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"js引擎-与-渲染引擎的关联"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js引擎-与-渲染引擎的关联","aria-hidden":"true"}},[this._v("#")]),this._v(" js引擎 与 渲染引擎的关联")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在之前，浏览器 js引擎和渲染引擎是没有任何关联的，我们去写动画只能通过 setTimeout 或者 setInterval，更加没有办法知道浏览器什么时候处于空闲状态,但是随着时间的发展，我们可以通过 requestAnimationFrame 和 requestIdleCallback。requestAnimationFrame 要求浏览器在下次重绘之前调用指定的回调函数更新动画。requestIdleCallback方法将在浏览器的空闲时段期间对要调用的队列函数进行执行。"),e("br"),this._v("\n那么内置DOM 操作是否能够在js引擎中，是否能够减少过桥的性能消耗或者完全把桥打通。让我们拭目以待。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],r=n(0),s=Object(r.a)({},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("我是标题党吗？是，但也不是。以图为证。")]),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("上图表示了vue, react 以及 imba 在 todo 这个项目中拥有60个 todoItem 不同进行 crud 操作的表现。可以看到 imba 达到了每秒操作5w次以上。如果你也想试一试该测试,可以访问 "),n("a",{attrs:{href:"https://somebee.github.io/dom-reconciler-bench/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Todos Bench"),n("OutboundLink")],1),t._v("。测试使用的是 "),n("a",{attrs:{href:"https://benchmarkjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Benchmark.js"),n("OutboundLink")],1),t._v("。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),n("p",[t._v("可以看出作者喜欢 ruby 以及 pug，偏向于缩进类风格(个人并不是很喜欢这种语法风格)。具体语法可以参考 "),n("a",{attrs:{href:"http://imba.io/guides/essentials/introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("imba 文档"),n("OutboundLink")],1),t._v("。当然了，因为可以编译成js，所以服务端编译成 js 进行node开发也是可以实现的。")]),t._v(" "),t._m(6),t._v(" "),n("p",[t._v("任何一个实现的性能优化都有其理论基础，那么 imba 性能那么快的基础究竟是什么呢？答案也就是  memoized DOM（记忆DOM）。")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),n("p",[t._v("我们可以测试一下。这里我写一个 getElsByDocument 以及 simplePerTest。")]),t._v(" "),t._m(10),t._m(11),t._v(" "),n("p",[t._v("这个缓存的节点查询可要比 querySelectorAll 快了 140倍以上啊，随着 img 节点越多，得到的性能提升也越高啊。如果imba 框架中所有的节点都在内存中呢？同时，我们还会得到一个 js 运行时优化( GC 的大量减少),因为虚拟DOM 要维护一个树，在进行多次 crud 之后就会产生大量无用对象从而导致浏览器进行 GC,而 memoized DOM 在多次 crud 不会进行多次 GC。(可能会在渲染引擎中 GC?但我感觉渲染引擎中GC 要比JS 中影响要小很多。挖个坑，研究完渲染引擎再来探讨一下)")]),t._v(" "),t._m(12),t._v(" "),n("p",[t._v("实例如下所示：")]),t._v(" "),t._m(13),n("p",[t._v("上面的自定义组件会编译成下面的js")]),t._v(" "),t._m(14),n("p",[t._v("仔细观察一下这里的函数，你会看到该组件在第一次调用渲染时，将使用 createElement 创建两个子节点，并设置它们的属性并且缓存。第二次或者第一万次调用时，children-array将被缓存，不会发生任何调用。")]),t._v(" "),t._m(15),n("p",[t._v("其中查看源码，我们可以看到 setChildren 函数都是对真实DOM 进行了操作。获取之前的DOM节点进行一系列操作后将当前节点返回并缓存。")]),t._v(" "),t._m(16),n("p",[t._v("如果我们使用了动态属性。代码如下")]),t._v(" "),t._m(17),n("p",[t._v("可以得到如下代码，详细查看可以看出，imba 提取了可变量，放入了 synced 函数中，每次渲染中只会执行 synced 里面的数据，所以依然会得到极高的渲染速度")]),t._v(" "),t._m(18),n("p",[t._v("精确的抽取不可变量，然后无需虚拟DOM 计算，同时对于真实DOM 还进行了缓存，我们可以看出 memoized DOM 与 虚拟DOM 不同，memoized DOM 是具有实际的性能收益。")]),t._v(" "),t._m(19),t._v(" "),n("p",[t._v("我们在上面看到了 imba 框架的理论基础，那么他是否真的比vue快50倍？当然不是，这也就是在上面说我是标题党的原因。")]),t._v(" "),t._m(20),t._v(" "),n("p",[t._v("浏览器本身只能达到 60 fps( 1 秒刷新了60次 )。当然了，其实对于体验而言，60fps的体验已经差不多够用了，也就是浏览器渲染上大概需要 17ms 去渲染一次。事实上无论是每秒操作dom 5w次还是 1000次，浏览器渲染引擎也只会记录当前的脏数据。然后在需要渲染时候再进行重绘与重排。")]),t._v(" "),t._m(21),t._v(" "),n("p",[t._v("面对 memoized DOM 的缓存优化以及更少 GC 带来的运行时提升，我们需要更多内存来对每一个 dom节点进行缓存。这个在初始化渲染时有大量的消耗。同时我们的浏览器执行速度和渲染速度已经足够快了，虚拟DOM已经完全够用了。")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),n("p",[t._v("单页应用程序（Single Page Applications，SPA）提供了很好的页面交互，但代价是构建的复杂性更高，多页面应用程序（Multi-page Applications，MPA）更容易构建，但最终会在页面之间出现空白屏幕。")]),t._v(" "),n("p",[t._v("Portals 结合了这两者的优势，主要用于改进网页交互体验，目标是无缝导航。它类似于 iframe ，内嵌在网页上，但可以导航到页面内容上。用户在一个页面跳转另一个内容时，虽然 URL 相应地发生变化，但是不需要打开另一个窗口，此时该内容标记的 Portals 会变成原来页面的顶级页面，同时原来页面在其后保持主进程地位。现场演示了这对于购物体验的极大便利，此外还有对漫画这类单页面应用的演示。")]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/libin-1/p/6376026.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("高性能JS-DOM"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"http://imba.io/guides/advanced/performance",target:"_blank",rel:"noopener noreferrer"}},[t._v("imba 性能篇"),n("OutboundLink")],1)]),t._v(" "),n("Utterances",{attrs:{id:8}})],1)},a,!1,null,null,null);e.default=s.exports}}]);